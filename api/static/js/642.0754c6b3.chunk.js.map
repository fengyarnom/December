{"version":3,"file":"static/js/642.0754c6b3.chunk.js","mappings":"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","sources":["components/admin_notice_list/admin_notice_list.js"],"sourcesContent":["import { Component } from \"react\";\nimport Table from '@mui/material/Table';\nimport TableBody from '@mui/material/TableBody';\nimport TableCell from '@mui/material/TableCell';\nimport TableContainer from '@mui/material/TableContainer';\nimport TableHead from '@mui/material/TableHead';\nimport TableRow from '@mui/material/TableRow';\nimport Paper from '@mui/material/Paper';\nimport { Link } from \"react-router-dom\";\nimport Button from '@mui/material/Button';\nimport ButtonGroup from '@mui/material/ButtonGroup';\nimport Pagination from '@mui/material/Pagination';\nimport Alert from '@mui/material/Alert';\nimport axios from \"axios\";\nimport './admin_notice_list.scss'\nexport default class AdminNoticeList extends Component{\n    constructor(props){\n        super(props);\n        this.state = {\n            postArr: [],\n            page:1,\n            postCount:0,\n            error_flag:false,\n            error_message:\"\",\n            \n        }\n\n    }\n\n    componentDidMount() {\n\n        axios.get(\"/api/seleteTable?class=NOTICE&order_by=pid&desc=desc&limit=5&condition=visible=1\")\n        .then(res => {\n            this.setState({\n                postArr:res.data.data,\n            })   \n        })\n        \n        axios.get('/api/getTableCount/NOTICE?condition=visible=1')\n        .then(res => {\n\n            if(res.data['code'] == 200){\n                this.setState({\n                    postCount:Math.ceil(res.data['data']/5)\n                })\n            }\n        })\n      }\n\n      handlePageChange = (event, value) => {\n        this.setState({\n            page:value\n        })\n        var offset = 5 * (value-1)\n        axios.get('/api/seleteTable?class=NOTICE&condition=visible=1&order_by=pid&desc=desc&limit=5&offset='+offset)\n          .then(res => {\n            this.setState({\n                postArr:res.data.data,\n            })\n                \n           \n          })\n      }\n    handleDelete(index,pid,title){\n        if((window.confirm(\"您确定要隐藏《 \"+title+\" 》 吗\"))){\n            axios.post('/api/delete/NOTICE/pid='+pid)\n            .then(res => {\n                if(res.data['code'] == 200){ \n                    const arr = this.state.postArr\n                    arr.splice(index,1)\n                    this.setState({\n                        postArr:arr,\n                    })\n                }\n                else if(res.data['code'] == 401){\n                    this.setState({\n                        error_flag:true,\n                        error_message:res.data['message']\n                    })\n                }\n                    \n            \n            })\n        }\n    }\n    render(){\n        return(\n            <div className=\"AdminAritleList\">\n                {\n                    this.state.error_flag\n                    ?<Alert severity=\"error\">{this.state.error_message}</Alert>\n                    :<span></span>\n                \n                }\n                <div className=\"header\">\n                    <div className=\"title\"><h3>通告管理</h3></div>\n                    <Link to=\"/newPost\"><Button variant=\"contained\">写一篇新通告</Button></Link>\n                </div>\n                <div className=\"content\">\n                <TableContainer component={Paper}>\n                    <Table  sx={{ minWidth: 650 }} aria-label=\"simple table\">\n                        <TableHead>\n                        <TableRow>\n                            <TableCell align=\"center\">标题</TableCell>\n                            <TableCell align=\"center\">发布时间</TableCell>\n                            <TableCell align=\"center\">操作</TableCell>\n                        </TableRow>\n                        </TableHead>\n                        <TableBody>\n                        {  \n                        this.state.postArr.map((item,index) => (\n                            <TableRow\n                            sx={{ '&:last-child td, &:last-child th': { border: 0 } }}\n                            \n                            key={index}>\n\n                            <TableCell align=\"center\">{item['title']}</TableCell>\n                            <TableCell align=\"center\">{item['create_date']}</TableCell>\n                            <TableCell align=\"center\">\n                                <ButtonGroup variant=\"contained\" aria-label=\"outlined primary button group\">\n                                    <Button><Link to={\"/newPost?class=notice&pid=\"+item['pid']}>修改</Link></Button>\n                                    <Button onClick={this.handleDelete.bind(this,index,item['pid'],item['title'])}>删除</Button>\n                                    \n                                </ButtonGroup>\n                                </TableCell>\n                            </TableRow> \n                            ))\n                        }\n                        \n                        </TableBody>\n                            \n                        </Table>\n                        \n                            <Pagination count={this.state.postCount} variant=\"outlined\" shape=\"rounded\" page={this.state.page} onChange={this.handlePageChange.bind(this)} />\n                        \n                        </TableContainer>\n                </div>\n            </div>\n            \n        )\n    }\n}"],"names":["AdminNoticeList","props","handlePageChange","event","value","setState","page","offset","axios","then","res","postArr","data","state","postCount","error_flag","error_message","Math","ceil","index","pid","title","window","confirm","arr","splice","className","this","Alert","severity","to","Button","variant","TableContainer","component","Paper","Table","sx","minWidth","TableHead","TableRow","TableCell","align","TableBody","map","item","border","ButtonGroup","onClick","handleDelete","bind","Pagination","count","shape","onChange","Component"],"sourceRoot":""}